# ==============================================
# SHUFFLE & SYNC - PRODUCTION ENVIRONMENT
# ==============================================
# Copy this file to .env.production and configure all values
# This template includes ALL variables for production deployment

# ==============================================
# üî¥ CRITICAL PRODUCTION VARIABLES - REQUIRED
# ==============================================

# Database Connection (SQLite Cloud)
# Format: sqlitecloud://host:port/database?apikey=YOUR_API_KEY
# Get connection string from: https://sqlitecloud.io (create account, create database, copy connection string)
# Example: sqlitecloud://your-host.sqlite.cloud:8860/shuffleandsync?apikey=YOUR_API_KEY
DATABASE_URL=sqlitecloud://your-host.sqlite.cloud:8860/shuffleandsync?apikey=WXRy8ecObcGjMYRmuTT7bAEnvblToCbV4bHqUv8g6oQ

# Direct database URL for migrations (optional - uses DATABASE_URL if not set)
# Used by Drizzle ORM for schema operations
# Format: Same as DATABASE_URL
DATABASE_DIRECT_URL=

# Authentication Secret (CRITICAL: Generate unique 64+ character secret)
# Use: openssl rand -base64 64
# NEVER use demo values in production!
AUTH_SECRET=/CCSM0QflihS0fvZjm843r+VFo/nMPL5PPnrpwuL3kTmYIhk0F2MXgybk62vnKSbmgQl3DGU2fc1sX8q4vsKiA==

# Production Domain (HTTPS required)
# OPTIONAL in Cloud Run - auto-detects from X-Forwarded-Host header
# Set this only if you need to override automatic URL detection
# When omitted, the application will use the actual request URL from Cloud Run
# Example: https://shufflesync.com
# AUTH_URL= https://www.shuffleandsync.com

# Trust proxy headers (required for Cloud Run/Load Balancers)
# Enables automatic URL detection from proxy headers
# Default: true
AUTH_TRUST_HOST=true
# # Google OAuth 2.0 Credentials (Optional but recommended for OAuth login)
# Get from: https://console.developers.google.com
# Configure authorized redirect URIs in Google Console:
#   For Cloud Run: https://your-service-xxx.run.app/api/auth/callback/google
#   For custom domain: https://shuffleandsync.org/api/auth/callback/google
# You can add multiple redirect URIs for different environments
GOOGLE_CLIENT_ID=683555795974-mlphp1cp5utd8qc5nh310hvt1npapo71.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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

# ==============================================
# üëë ADMINISTRATOR CONFIGURATION
# ==============================================

# Master Administrator Email (CRITICAL)
# Email address of the primary system administrator
# This user will automatically receive super_admin role
# SECURITY: Use a dedicated admin email, not a personal account
# Example: admin@yourdomain.com
MASTER_ADMIN_EMAIL=admin@shuffleandsync.com

# Master Administrator Password (Optional)
# Set this only if you need credentials authentication
# If not set, admin must use OAuth (Google) authentication (RECOMMENDED)
# SECURITY: Minimum 12 characters, use strong password generator
# Generate with: openssl rand -base64 16
# Store securely in password manager and enable MFA after first login
MASTER_ADMIN_PASSWORD=Es5WzxsxyTYAF8uWsLyKgA==

# ==============================================
# üü† PLATFORM-MANAGED VARIABLES
# ==============================================
# These are typically set by your deployment platform (Cloud Run, Heroku, etc.)

# Application Port (set by deployment platform)
PORT=8080

# Environment Indicator
NODE_ENV=production

# ==============================================
# üü° ESSENTIAL SERVICES (Recommended)
# ==============================================

# Email Service (SendGrid - required for user notifications)
# Get API key from: https://app.sendgrid.com/settings/api_keys
# Format: SG.xxxxxxxxxxxxxxxxxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_API_KEY=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

# SendGrid Sender Email
# Default sender email address - must be verified in SendGrid
# Example: noreply@yourdomain.com
SENDGRID_SENDER=noreply@shuffleandsync.com

# Stream Encryption Key (required for streaming features)
# Must be exactly 32 characters (256-bit)
# Generate with: openssl rand -hex 16
STREAM_KEY_ENCRYPTION_KEY=40b8c67ffcd7c06dc4efa8679e9424c2

# Redis Cache (highly recommended for performance)
# Format: redis://username:password@host:port
# Example: redis://default:password@redis-host:6379
REDIS_URL=rredis://default:nQMz13WSW7yqv9ybZlJSe0ThWjJeJDzm@redis-10054.c124.us-central1-1.gce.redns.redis-cloud.com:10054

# ==============================================
# üîµ STREAMING PLATFORM INTEGRATIONS
# ==============================================

# Twitch Integration (for Twitch streamers)
# Get credentials from: https://dev.twitch.tv/console/apps
# Configure redirect URI: https://shuffleandsync.com/api/auth/callback/twitch
TWITCH_CLIENT_ID=3nxvjzetlpsh4xemuhm9yjaerqui70
TWITCH_CLIENT_SECRET=xhozjfycxbt3ejyh6ai8zqst91fa2s

# Twitch EventSub Webhooks (for real-time Twitch events)
# Generate secure random token (16+ characters)
# Generate with: openssl rand -hex 16
TWITCH_EVENTSUB_SECRET=25bfa576393db59456e3bdc5a5eed674

# YouTube API (for YouTube streamers)
# Get API key from: https://console.developers.google.com
# Enable YouTube Data API v3
YOUTUBE_API_KEY=AIzaSyCxr3VGqyiooFCH-93OAzPMeZYs_0fOKgs

# YouTube OAuth (for advanced YouTube features)
# Get credentials from: https://console.developers.google.com
# Configure redirect URI: https://shuffleandsync.org/api/auth/callback/google
YOUTUBE_CLIENT_ID=683555795974-mlphp1cp5utd8qc5nh310hvt1npapo71.apps.googleusercontent.com
YOUTUBE_CLIENT_SECRET=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

# YouTube Webhook Verification Token
# Generate secure random token (16+ characters)
YOUTUBE_WEBHOOK_VERIFY_TOKEN=2be83549246f4c3c0034c74f693eb757

# Facebook Gaming Integration (for Facebook Gaming streamers)
# Get credentials from: https://developers.facebook.com
# Configure redirect URI: https://your-domain.com/api/auth/callback/facebook
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret

# Facebook Webhook Verification Token
# Generate secure random token (16+ characters)
FACEBOOK_WEBHOOK_VERIFY_TOKEN=your-facebook-webhook-token

# Discord Bot Integration (for community features)
# Get token from: https://discord.com/developers/applications
# Required permissions: Read Messages, Send Messages, Manage Webhooks
DISCORD_BOT_TOKEN=MTQxMTAzNDg4Mzk1NDA0OTA1Nw.G0m8uF.PCNZx_V-UKW-vtQ-eJ9DtstvL3i9iCoFxls5RM

# ==============================================
# üõ°Ô∏è SECURITY & CORS CONFIGURATION
# ==============================================

# Allowed Origins for CORS (critical for security)
# Comma-separated list of allowed domains
# Include all your domains and subdomains
ALLOWED_ORIGINS=https://www.shuffleandsync.com,https://shuffleandsync.com,https://api.shuffleandsync.com, https://shuffleandsync.org, https://www.shuffleandsync.org

# Rate Limiting Configuration
# Time window in milliseconds (15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# Session Configuration
# Session max age in milliseconds (7 days = 604800000)
SESSION_MAX_AGE=604800000

# ==============================================
# üìä MONITORING & OBSERVABILITY
# ==============================================

# Log Level (recommended: info or warn for production)
# Values: error, warn, info, debug
LOG_LEVEL=info

# Google Cloud Project (for Cloud Logging and monitoring)
# Required if using Google Cloud Platform
GOOGLE_CLOUD_PROJECT=polynomial-coda-471616-j9

# Application Insights (optional but recommended)
# For monitoring and performance tracking
APPLICATION_INSIGHTS_CONNECTION_STRING=

# Sentry DSN (optional - for error tracking)
# Get from: https://sentry.io
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ==============================================
# üîß ADVANCED CONFIGURATION
# ==============================================

# Database Connection Pool Settings
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=30000

# SSL Configuration (Cloud SQL)
DB_SSL_MODE=require
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# WebSocket Configuration
WS_PORT=3001
WS_PING_INTERVAL=30000
WS_PONG_TIMEOUT=5000

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_DESTINATION=uploads/
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif

# ==============================================
# üìù PRODUCTION DEPLOYMENT CHECKLIST
# ==============================================
#
# Before deploying to production, ensure:
#
# ‚úÖ Required Variables (üî¥):
#    ‚ñ° DATABASE_URL configured with production database
#    ‚ñ° AUTH_SECRET generated (64+ characters, unique)
#    ‚ñ° AUTH_URL set to production domain (HTTPS)
#    ‚ñ° GOOGLE_CLIENT_ID/SECRET from Google Console
#    ‚ñ° MASTER_ADMIN_EMAIL set to admin email address
#
# ‚úÖ Security Configuration:
#    ‚ñ° All demo/test values replaced
#    ‚ñ° ALLOWED_ORIGINS configured for your domains
#    ‚ñ° HTTPS enabled (AUTH_URL starts with https://)
#    ‚ñ° Strong secrets generated (no demo- or test- values)
#    ‚ñ° Rate limiting configured appropriately
#
# ‚úÖ Services Configuration:
#    ‚ñ° SENDGRID_API_KEY for email notifications
#    ‚ñ° REDIS_URL for performance (highly recommended)
#    ‚ñ° STREAM_KEY_ENCRYPTION_KEY for streaming features
#
# ‚úÖ Monitoring Setup:
#    ‚ñ° LOG_LEVEL set to 'info' or 'warn'
#    ‚ñ° GOOGLE_CLOUD_PROJECT for logging (if using GCP)
#    ‚ñ° Error tracking configured (Sentry, etc.)
#
# ‚úÖ Database Setup:
#    ‚ñ° Production database provisioned and accessible
#    ‚ñ° Connection pooling configured
#    ‚ñ° SSL enabled (DB_SSL_MODE=require)
#    ‚ñ° Migrations run successfully
#    ‚ñ° Admin account initialized (npm run admin:init)
#
# ‚úÖ Platform Configuration:
#    ‚ñ° Environment variables set in deployment platform
#    ‚ñ° Health checks configured (/health endpoint)
#    ‚ñ° Auto-scaling configured if needed
#    ‚ñ° Backup and monitoring configured
#
# üö® SECURITY WARNINGS:
# - Never commit this file with real values to version control
# - Use your platform's secret management (GCP Secret Manager, etc.)
# - Rotate secrets regularly (every 90 days recommended)
# - Monitor for credential leaks in logs
# - Use least-privilege access for all service accounts
#
