# ==============================================
# SHUFFLE & SYNC - PRODUCTION ENVIRONMENT
# ==============================================
# Copy this file to .env.production and configure all values
# This template includes ALL variables for production deployment

# ==============================================
# üî¥ CRITICAL PRODUCTION VARIABLES - REQUIRED
# ==============================================

# Database Connection (Cloud SQL or managed PostgreSQL)
# Format: postgresql://username:password@host:port/database_name
# Example: postgresql://user:pass@35.1.2.3:5432/shufflesync_prod
DATABASE_URL=postgresql://username:password@host:port/database_name

# Direct database URL for migrations (if different from DATABASE_URL)
# Used by Drizzle ORM for schema operations
DATABASE_DIRECT_URL=

# Authentication Secret (CRITICAL: Generate unique 64+ character secret)
# Use: openssl rand -base64 64
# NEVER use demo values in production!
AUTH_SECRET=your-secure-64-character-secret-key-here-replace-with-random

# Production Domain (HTTPS required)
# Your application's public URL
# Example: https://shufflesync.com
AUTH_URL=https://your-production-domain.com

# Google OAuth 2.0 Credentials (Required for authentication)
# Get from: https://console.developers.google.com
# Configure authorized redirect URIs: https://your-domain.com/api/auth/callback/google
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# ==============================================
# üëë ADMINISTRATOR CONFIGURATION
# ==============================================

# Master Administrator Email (CRITICAL)
# Email address of the primary system administrator
# This user will automatically receive super_admin role
# SECURITY: Use a dedicated admin email, not a personal account
# Example: admin@yourdomain.com
MASTER_ADMIN_EMAIL=admin@your-domain.com

# Master Administrator Password (Optional)
# Set this only if you need credentials authentication
# If not set, admin must use OAuth (Google) authentication (RECOMMENDED)
# SECURITY: Minimum 12 characters, use strong password generator
# Generate with: openssl rand -base64 16
# Store securely in password manager and enable MFA after first login
MASTER_ADMIN_PASSWORD=

# ==============================================
# üü† PLATFORM-MANAGED VARIABLES
# ==============================================
# These are typically set by your deployment platform (Cloud Run, Heroku, etc.)

# Application Port (set by deployment platform)
PORT=8080

# Environment Indicator
NODE_ENV=production

# Trust proxy headers (required for Cloud Run/Load Balancers)
AUTH_TRUST_HOST=true

# ==============================================
# üü° ESSENTIAL SERVICES (Recommended)
# ==============================================

# Email Service (SendGrid - required for user notifications)
# Get API key from: https://app.sendgrid.com/settings/api_keys
# Format: SG.xxxxxxxxxxxxxxxxxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_API_KEY=your-sendgrid-api-key

# SendGrid Sender Email
# Default sender email address - must be verified in SendGrid
# Example: noreply@yourdomain.com
SENDGRID_SENDER=noreply@your-domain.com

# Stream Encryption Key (required for streaming features)
# Must be exactly 32 characters (256-bit)
# Generate with: openssl rand -hex 16
STREAM_KEY_ENCRYPTION_KEY=your-32-character-encryption-key

# Redis Cache (highly recommended for performance)
# Format: redis://username:password@host:port
# Example: redis://default:password@redis-host:6379
REDIS_URL=redis://username:password@host:port

# ==============================================
# üîµ STREAMING PLATFORM INTEGRATIONS
# ==============================================

# Twitch Integration (for Twitch streamers)
# Get credentials from: https://dev.twitch.tv/console/apps
# Configure redirect URI: https://your-domain.com/api/auth/callback/twitch
TWITCH_CLIENT_ID=your-twitch-client-id
TWITCH_CLIENT_SECRET=your-twitch-client-secret

# Twitch EventSub Webhooks (for real-time Twitch events)
# Generate secure random token (16+ characters)
# Generate with: openssl rand -hex 16
TWITCH_EVENTSUB_SECRET=your-twitch-eventsub-secret

# YouTube API (for YouTube streamers)
# Get API key from: https://console.developers.google.com
# Enable YouTube Data API v3
YOUTUBE_API_KEY=your-youtube-api-key

# YouTube OAuth (for advanced YouTube features)
# Get credentials from: https://console.developers.google.com
# Configure redirect URI: https://your-domain.com/api/auth/callback/youtube
YOUTUBE_CLIENT_ID=your-youtube-client-id
YOUTUBE_CLIENT_SECRET=your-youtube-client-secret

# YouTube Webhook Verification Token
# Generate secure random token (16+ characters)
YOUTUBE_WEBHOOK_VERIFY_TOKEN=your-youtube-webhook-token

# Facebook Gaming Integration (for Facebook Gaming streamers)
# Get credentials from: https://developers.facebook.com
# Configure redirect URI: https://your-domain.com/api/auth/callback/facebook
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret

# Facebook Webhook Verification Token
# Generate secure random token (16+ characters)
FACEBOOK_WEBHOOK_VERIFY_TOKEN=your-facebook-webhook-token

# Discord Bot Integration (for community features)
# Get token from: https://discord.com/developers/applications
# Required permissions: Read Messages, Send Messages, Manage Webhooks
DISCORD_BOT_TOKEN=your-discord-bot-token

# ==============================================
# üõ°Ô∏è SECURITY & CORS CONFIGURATION
# ==============================================

# Allowed Origins for CORS (critical for security)
# Comma-separated list of allowed domains
# Include all your domains and subdomains
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com,https://api.your-domain.com

# Rate Limiting Configuration
# Time window in milliseconds (15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# Session Configuration
# Session max age in milliseconds (7 days = 604800000)
SESSION_MAX_AGE=604800000

# ==============================================
# üìä MONITORING & OBSERVABILITY
# ==============================================

# Log Level (recommended: info or warn for production)
# Values: error, warn, info, debug
LOG_LEVEL=info

# Google Cloud Project (for Cloud Logging and monitoring)
# Required if using Google Cloud Platform
GOOGLE_CLOUD_PROJECT=your-gcp-project-id

# Application Insights (optional but recommended)
# For monitoring and performance tracking
APPLICATION_INSIGHTS_CONNECTION_STRING=

# Sentry DSN (optional - for error tracking)
# Get from: https://sentry.io
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ==============================================
# üîß ADVANCED CONFIGURATION
# ==============================================

# Database Connection Pool Settings
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=30000

# SSL Configuration (Cloud SQL)
DB_SSL_MODE=require
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# WebSocket Configuration
WS_PORT=3001
WS_PING_INTERVAL=30000
WS_PONG_TIMEOUT=5000

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_DESTINATION=uploads/
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif

# ==============================================
# üìù PRODUCTION DEPLOYMENT CHECKLIST
# ==============================================
#
# Before deploying to production, ensure:
#
# ‚úÖ Required Variables (üî¥):
#    ‚ñ° DATABASE_URL configured with production database
#    ‚ñ° AUTH_SECRET generated (64+ characters, unique)
#    ‚ñ° AUTH_URL set to production domain (HTTPS)
#    ‚ñ° GOOGLE_CLIENT_ID/SECRET from Google Console
#    ‚ñ° MASTER_ADMIN_EMAIL set to admin email address
#
# ‚úÖ Security Configuration:
#    ‚ñ° All demo/test values replaced
#    ‚ñ° ALLOWED_ORIGINS configured for your domains
#    ‚ñ° HTTPS enabled (AUTH_URL starts with https://)
#    ‚ñ° Strong secrets generated (no demo- or test- values)
#    ‚ñ° Rate limiting configured appropriately
#
# ‚úÖ Services Configuration:
#    ‚ñ° SENDGRID_API_KEY for email notifications
#    ‚ñ° REDIS_URL for performance (highly recommended)
#    ‚ñ° STREAM_KEY_ENCRYPTION_KEY for streaming features
#
# ‚úÖ Monitoring Setup:
#    ‚ñ° LOG_LEVEL set to 'info' or 'warn'
#    ‚ñ° GOOGLE_CLOUD_PROJECT for logging (if using GCP)
#    ‚ñ° Error tracking configured (Sentry, etc.)
#
# ‚úÖ Database Setup:
#    ‚ñ° Production database provisioned and accessible
#    ‚ñ° Connection pooling configured
#    ‚ñ° SSL enabled (DB_SSL_MODE=require)
#    ‚ñ° Migrations run successfully
#    ‚ñ° Admin account initialized (npm run admin:init)
#
# ‚úÖ Platform Configuration:
#    ‚ñ° Environment variables set in deployment platform
#    ‚ñ° Health checks configured (/health endpoint)
#    ‚ñ° Auto-scaling configured if needed
#    ‚ñ° Backup and monitoring configured
#
# üö® SECURITY WARNINGS:
# - Never commit this file with real values to version control
# - Use your platform's secret management (GCP Secret Manager, etc.)
# - Rotate secrets regularly (every 90 days recommended)
# - Monitor for credential leaks in logs
# - Use least-privilege access for all service accounts
#